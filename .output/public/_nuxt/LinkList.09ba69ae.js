import{_ as e}from"./FixMenu.vue_vue_type_style_index_0_scoped_c1cb519f_lang.c5d3af51.js";import{u as l}from"./pinia.7ac5f2a7.js";import{a,u as t}from"./index.c0d6e22f.js";import{F as n,G as s,W as i,e as o,ac as u,a as d,Q as r,f as c,a9 as v,H as m,I as p,a4 as h,Y as f,Z as k,X as y,u as g,a2 as b,U as A,_ as V,i as x,x as C,$ as F,a0 as I,a1 as U}from"./element-plus.3e7898c2.js";import{_ as j}from"./delete.3a3a4f9c.js";import{_ as B}from"./entry.cf5e7fb4.js";import"./uuid.d56aad75.js";import"./lodash.93025024.js";import"./dayjs.3bf4ac2a.js";import"./store.e5acb8cd.js";const E={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},M=[i("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),i("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];const w={name:"ep-edit",render:function(e,l){return n(),s("svg",E,M)}},_={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},D=[i("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96v64z"},null,-1)];const L={name:"ep-flag",render:function(e,l){return n(),s("svg",_,D)}},Q=e=>(I("data-v-b0393f04"),e=e(),U(),e),S={class:"link-con"},z={key:0,class:"link-left bg-base-100"},O={class:"link-right"},W=Q((()=>i("div",{class:"right-linear"},null,-1))),q={class:"part-list"},H=["data-title","data-index"],K={class:""},R={class:"row"},T=["href"],G=["src"],N={key:0,class:"hot-link"},J={class:"opeartion"},P={key:0,class:"icon"},X={key:1,class:"icon"},Z=Q((()=>i("div",{style:{float:"right"}},"(hot,prompt,online,other)",-1))),Y={class:"dialog-footer"},$=B(o({__name:"LinkList",props:{filter:String,showLeftMenu:Boolean},emits:["editEvent","deleteEvent"],async setup(o){let I,U;l().vueApp.provide(u,{prefix:Math.floor(1e3*Math.random()),current:0});const B=a(),E=d(!1),{LinkApi:M}=t(),{links:_}=([I,U]=r((()=>M.getLinks())),I=await I,U(),I),D=d([{name:"",href:""}]),Q=d([]),$=d(0);D.value=_,Q.value=[...new Set(_.map((e=>e.link_type)))];const ee=d(!1),le=d(!1),ae=d(""),te=d(),ne=d(""),se=d(""),ie=d(""),oe=d(!1),ue=d(""),de=d(null),re=async()=>{const{links:e}=await M.getLinks();D.value=e},ce=()=>{le.value=!0,ae.value="add"},ve=()=>{le.value=!1,ae.value="",C((()=>{var e;null==(e=te.value)||e.resetFields()}))},me=()=>{"add"===ae.value&&pe(),"edit"===ae.value&&he()},pe=async()=>{if(200===(await M.addLink({name:ne.value,href:se.value,type:ie.value,hot:oe.value,icon:ue.value})).code)return ve(),C((()=>{re()})),F.ElMessage({showClose:!0,message:"新建成功",type:"success"})},he=async()=>{if(200===(await M.updateLink({name:ne.value,href:se.value,type:ie.value,hot:oe.value,id:de.value,icon:ue.value})).code)return ve(),C((()=>{re()})),F.ElMessage({showClose:!0,message:"更新成功",type:"success"})};return c((()=>{B.roleId+""=="1"&&(ee.value=!0,E.value=!0)})),(l,a)=>{const t=e,u=L,d=F.ElIcon,r=w,c=j,I=F.ElInput,U=F.ElFormItem,B=F.ElSwitch,_=F.ElForm,pe=F.ElButton,he=F.ElDialog,fe=v("scroll-to"),ke=v("animate-css");return n(),s("div",S,[m(t,null,{default:p((()=>[o.showLeftMenu?h((n(),s("div",z,[i("ul",null,[(n(!0),s(f,null,k(g(Q),((e,l)=>h((n(),s("li",{key:l,class:y({active:g($)===l})},[b(A(e),1)],2)),[[fe,{target:`.part:nth-child(${l+1}) > h2`,container:".link-right",behavior:"smooth",cb:e=>(e=>{$.value=e})(e||0===e?e:l)}]]))),128)),g(ee)?(n(),s("button",{key:0,class:"btn-primary btn-block btn",onClick:ce}," 新增链接 ")):V("",!0)])])),[[ke,{direction:"modifySlideInLeft"}]]):V("",!0)])),_:1}),m(t,null,{default:p((()=>[h((n(),s("div",O,[W,i("div",q,[(n(!0),s(f,null,k(g(Q),((e,l)=>{return n(),s("div",{key:e,id:"media",class:"part","data-title":e,"data-index":l},[i("h2",K,[i("strong",null,A(e),1)]),i("div",R,[(n(!0),s(f,null,k((a=e,a?[...D.value.filter((e=>e.link_type===a))]:[]),((e,l)=>{var a;return n(),s("div",{key:l,class:"item bg-base-100"},[i("a",{href:null==e?void 0:e.href,target:"_blank"},[i("h3",null,[i("img",{src:null!=(a=null==e?void 0:e.icon)?a:g("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhBAMAAADMnc9JAAAAG1BMVEX///8AAADR0dGamprq6uq2trZOTk4sLCx2dnZc6rgCAAAD90lEQVR42u2czU8bMRDFJ7ubZI9MIR/HbFXaa7YVqMeUzx4TaNUeWXFoj6xawTVbKvi3K3EZIRFs79hPSfHvDBlsv3kee0woEolEIi+VI4KR7X78wQ+Mrm/PZhSa4zt+zPXehAJyWPETXH6hQCT3vILLMOM85Gf4Q/55y8/yy7uG3rGB4QQUUBjNySMnzNiQOVsx8jaxCVsy9CWfkm3ZJi/02J7fqDkVpqSnYBeGpKbLbrwiLQt2ZA4eol6vBTsz1QoVPMgOC5iVrFiAyDXnVsxAuhGuqDUsYLSTcktab5SfmMHTWjF4WhNuDbWjz62ZgnJD2KFW1LyC0e3e2evdD/e+FzIxHjKSfV6FT4sbT2yOP3N/2TicWJnEhaJMNfzxJx6lU9t9UmOQjlI4I1vzHaptXAzTcpC+HGdmbU0TP1Id0BNkvnyutNZ86Sk9KsNUGQq+LS8Vx9igMV1CJg6fYighFQeOpcOSb3vx8ZmDrMeKdDR/SM9LxI7D0qQGP7SjcBB85sXmFmbhCF4ili5WWTlHtNsR3Bxxpje5YeCItUtOFz4impJDH9Es+B14xC14xCu3iORIsuYRFx4idp0ql9KDkycGWzW63Jj0ypk61kR6z5k41UQDD3uH4cCgrqwKh2nqe6lXe0pbvdJXjxdu5ftSfwqYuZ005+qz1bbjuY/c6bo6jr7TUlqaVsa6dBRSyyH2/V2TLew8q2GlVIWstlFe1+ctclJZHOoXXlt0SfPw63OTpPXCEQ7Ov75xcHzxuGDkymaA1gtF2sEoFDePXvuhcwpF49a+1nPKgmb/11/dzygQpVvHU0+PwbrJakV3xW+PaUphSBk9xAa0imbZDCgQNTN21+gzOhd5BaNQdnPKipacYhWBO3EfnRnUoGWTMmYjNjvqkkKBdhvK0Ts/FaBUFCrMJiUk8Lo/d3xGqqcDsjehANU2QglKRaECObgAH2ICMlShC9ozhBx0IhZ6aN1Qx9TZAEQcUFgK0G2RUIAcTihBe79QooVDDWjzFyq0VKnWOo4+4hYFhtERM1OdCoi4pLAkaxAxtMl11yDinB7xH0RMX0DESCQSiYQgO7+7ufn5nmAcV/JPQhA+o7eqFL07JqCbFWGB6TgIKe4qV87I2EGmjL4HKBh9nEPfWFMObAPIpGIvrSpgw0r8xvbycUPfcXWQjUcRDjQjS1z/WKQKFisLINeBN8kzZnBCJmsTkeVHNn5WMyvlbHh21Ix+C9DAXW4Bd/IO/ElHjnnsZLYACkiNk6pIB1yU9+CPOjKUqwol/DlA7pAbG9vx7KF0IzSgIQpd1yeyek5Qcyp8k4B/CcN3CYjiYF++6BVFdnREkUgkEnmR/AMh2q52O695+wAAAABJRU5ErkJggg==")},null,8,G),i("span",null,A(e.name),1),(null==e?void 0:e.hot)?(n(),s("i",N,[m(d,{color:"red"},{default:p((()=>[m(u)])),_:1})])):V("",!0)]),i("p",null,A((null==e?void 0:e.desc)?null==e?void 0:e.desc:"暂无描述"),1)],8,T),i("div",J,[g(E)?(n(),s("span",P,[m(r,{onClick:l=>{return a=e,ne.value=a.name,se.value=a.href,ie.value=a.link||a.link_type,oe.value=a.hot,ue.value=a.icon,de.value=a.id,le.value=!0,void(ae.value="edit");var a}},null,8,["onClick"])])):V("",!0),g(E)?(n(),s("span",X,[m(c,{onClick:l=>(async e=>{if(200===(await M.deleteLink({id:e})).code)return C((()=>{re()})),F.ElMessage({showClose:!0,message:"删除成功",type:"success"})})(null==e?void 0:e.id)},null,8,["onClick"])])):V("",!0)])])})),128))])],8,H);var a})),128))])])),[[ke,{direction:"modifySlideInRight"}]])])),_:1}),m(he,{modelValue:g(le),"onUpdate:modelValue":a[5]||(a[5]=e=>x(le)?le.value=e:null),title:"add"===g(ae)?"新增":"编辑",width:"600px","destroy-on-close":"","before-close":ve},{footer:p((()=>[i("span",Y,[m(pe,{onClick:ve},{default:p((()=>[b("取消")])),_:1}),m(pe,{type:"primary",onClick:me},{default:p((()=>[b("确定")])),_:1})])])),default:p((()=>[i("div",null,[m(_,{ref_key:"ruleFormRef",ref:te,"label-width":"110px"},{default:p((()=>[m(U,{label:"链接名称"},{default:p((()=>[m(I,{modelValue:g(ne),"onUpdate:modelValue":a[0]||(a[0]=e=>x(ne)?ne.value=e:null)},null,8,["modelValue"])])),_:1}),m(U,{label:"链接"},{default:p((()=>[m(I,{modelValue:g(se),"onUpdate:modelValue":a[1]||(a[1]=e=>x(se)?se.value=e:null)},null,8,["modelValue"])])),_:1}),m(U,{label:"Icon"},{default:p((()=>[m(I,{modelValue:g(ue),"onUpdate:modelValue":a[2]||(a[2]=e=>x(ue)?ue.value=e:null)},null,8,["modelValue"])])),_:1}),m(U,{label:"类别"},{default:p((()=>[m(I,{modelValue:g(ie),"onUpdate:modelValue":a[3]||(a[3]=e=>x(ie)?ie.value=e:null)},null,8,["modelValue"])])),_:1}),Z,m(U,{label:"热门"},{default:p((()=>[m(B,{modelValue:g(oe),"onUpdate:modelValue":a[4]||(a[4]=e=>x(oe)?oe.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1},512)])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-b0393f04"]]);export{$ as default};
