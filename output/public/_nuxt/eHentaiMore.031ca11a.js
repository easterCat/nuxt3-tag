import e from"./AreaTitle.aabfd2d0.js";import{u as a}from"./index.4fe012d4.js";import{u as l,a as t}from"./shop.8f25176c.js";import{B as n}from"./pinia.7ac5f2a7.js";import{e as s,a as o,r as u,w as r,F as i,G as d,H as c,I as v,W as p,X as m,_ as b,L as f,u as g,$ as h,Y as y,Z as _,U as k,a3 as w,a2 as j,a0 as C,a1 as x}from"./element-plus.3e7898c2.js";import{_ as z}from"./document-copy.9ed563a4.js";import{_ as E}from"./shopping-trolley.5f2a9482.js";import{d as T,_ as M}from"./entry.fcefc495.js";/* empty css                                                                  */import"./lodash.93025024.js";import"./dayjs.3bf4ac2a.js";import"./store.e5acb8cd.js";import"./uuid.d56aad75.js";const S={class:"eh-con"},H=(e=>(C("data-v-11642907"),e=e(),x(),e))((()=>p("span",{class:"eh-title-side-tip"},"(31813个标签版本,高h,慎重)",-1))),L={key:0,class:"flex justify-between m-b-10"},V={class:"control-blur-btns"},$={class:"m-r-12"},U=["innerHTML"],A=["innerHTML"],O={key:2,class:"demo-pagination-block"},R=M(s({__name:"eHentaiMore",props:{searchText:{type:String,default:""}},setup(s){const C=s,{EhttApi:x}=a(),{copy:M}=l(),{addShop:R}=t(),B=n(),D=o(!1),I=o(!1),J=o(1),N=o(20),W=o(0),F=o("hidden"),G=o(""),P=o([]);let X=u([]),Y=u([]),Z=u([]),q=u([]),K=u({data:[]});const Q=new Worker("/nuxt3-tag/worker.js");Q.onmessage=function(e){const{type:a,data:l}=e.data;"all"===a&&(Y=l,Z=l,W.value=Z.length,te()),"select"===a&&(Z=l,W.value=Z.length,te()),"search"===a&&(Z=l,W.value=Z.length,te())},Q.onerror=function(e){console.log(["worker ERROR: Line ",e.lineno," in ",e.filename,": ",e.message].join(""))},r(D,(e=>{"pc-tags-eh"===B.name&&e&&!I.value&&(I.value=!0,ee())})),r(C,(e=>{"pc-tags-eh"===B.name&&ne(e.searchText)})),r(G,(async e=>{"pc-tags-eh"===B.name&&Q.postMessage({type:"select",data:Y,select:e})}));const ee=async()=>{K=await x.getNameSpaceList(),P.value=K.data;const e=await x.getAllJsonData();X=JSON.parse(e).data,Q.postMessage({type:"all",data:X})},ae=e=>{N.value=e,J.value=1,te()},le=e=>{J.value=e,te()},te=()=>{q=Z.slice((J.value-1)*N.value,J.value*N.value),console.log("tableData :>> ",q)},ne=T((e=>{G.value="",Q.postMessage({type:"search",data:Y,search:e})}),1500);return(a,l)=>{const t=h.ElSwitch,n=e,s=h.ElOption,o=h.ElSelect,u=h.ElTableColumn,r=E,C=h.ElButton,x=z,T=h.ElTable,B=h.ElPagination;return i(),d("div",S,[c(n,{title:"EH超多标签列表"},{titleSide:v((()=>[c(t,{modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏","active-text":"开启",class:"title-side"},null,8,["modelValue"]),H])),_:1}),D.value?(i(),d("div",L,[c(o,{modelValue:G.value,"onUpdate:modelValue":l[1]||(l[1]=e=>G.value=e),class:"m-2",placeholder:"命名空间",size:"large"},{default:v((()=>[(i(!0),d(y,null,_(P.value,(e=>{var a;return i(),f(s,{key:e.value,label:`${null==e?void 0:e.namespace} ${null==(a=null==e?void 0:e.frontMatters)?void 0:a.name} ${null==e?void 0:e.count}条`,value:e.namespace},null,8,["label","value"])})),128))])),_:1},8,["modelValue"]),p("div",V,[p("button",{class:m(["btn btn-sm m-r-10",["hidden"===F.value?"btn-accent":"btn-secondary-30"]]),onClick:l[2]||(l[2]=()=>F.value="hidden")}," 隐藏 ",2),p("button",{class:m(["btn btn-sm m-r-10",["flur"===F.value?"btn-accent":"btn-secondary-30"]]),onClick:l[3]||(l[3]=()=>F.value="flur")}," 模糊 ",2),p("button",{class:m(["btn btn-sm m-r-10",["show"===F.value?"btn-accent":"btn-secondary-30"]]),onClick:l[4]||(l[4]=()=>F.value="show")}," 缩小 ",2),p("button",{class:m(["btn btn-sm",["default"===F.value?"btn-accent":"btn-secondary-30"]]),onClick:l[5]||(l[5]=()=>F.value="default")}," 原图 ",2)])])):b("",!0),D.value?(i(),f(T,{key:1,class:"m-b-10",data:g(q),border:"",stripe:"",size:"large",style:{width:"100%"}},{default:v((()=>[c(u,{prop:"namespace",label:"命名空间",width:"130"}),c(u,{prop:"key",label:"原始标签",width:"270"},{default:v((e=>{var l;return[p("span",$,k((null==(l=e.row)?void 0:l.key)||""),1),c(C,{size:"small",circle:"",onClick:a=>{var l;return g(R)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[w(a.$slots,"icon",{},(()=>[c(r)]),!0)])),_:2},1032,["onClick"]),c(C,{size:"small",circle:"",onClick:a=>{var l;return g(M)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[w(a.$slots,"icon",{},(()=>[c(x)]),!0)])),_:2},1032,["onClick"])]})),_:3}),c(u,{prop:"value",label:"名称",width:"170"},{default:v((e=>{var a,l,t;return[j(k((null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.name)?void 0:t.text)||""),1)]})),_:1}),c(u,{prop:"value",label:"描述"},{default:v((e=>{var a,l,t;return[p("div",{class:m(["table-intro",{"show-img":"show"===F.value,"hidden-img":"hidden"===F.value,"flur-img":"flur"===F.value,"default-img":"default"===F.value}]),innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.intro)?void 0:t.html)||""},null,10,U)]})),_:1}),c(u,{prop:"value",label:"数据库页面",width:"180"},{default:v((e=>{var a,l,t;return[p("div",{innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.links)?void 0:t.html.replace(/(<a)/g,"<a target='_blank'"))||""},null,8,A)]})),_:1})])),_:3},8,["data"])):b("",!0),D.value?(i(),d("div",O,[c(B,{"current-page":J.value,"onUpdate:current-page":l[6]||(l[6]=e=>J.value=e),"page-size":N.value,"onUpdate:page-size":l[7]||(l[7]=e=>N.value=e),"page-sizes":[20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:W.value,onSizeChange:ae,onCurrentChange:le},null,8,["current-page","page-size","total"])])):b("",!0)])}}}),[["__scopeId","data-v-11642907"]]);export{R as default};
