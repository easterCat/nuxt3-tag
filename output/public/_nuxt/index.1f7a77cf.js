import e from"./AppFooter.6eecb1c5.js";import{u as l,a as s}from"./index.4fe012d4.js";import{q as a}from"./pinia.7ac5f2a7.js";import{e as t,a as n,F as o,G as c,W as i,u,a4 as d,a5 as p,i as r,_ as m,H as b,$ as v,a0 as g,a1 as f}from"./element-plus.3e7898c2.js";import{_ as w}from"./entry.fcefc495.js";/* empty css                                                                  */import"./store.e5acb8cd.js";import"./dayjs.3bf4ac2a.js";import"./lodash.93025024.js";import"./uuid.d56aad75.js";const y=e=>(g("data-v-fc2ebb8d"),e=e(),f(),e),h={class:"login-page page bg-base-100"},k={class:"content"},_={class:"outer-con"},x={class:"inner-con"},j={key:0,class:"login-con"},C={class:"w-full form-control"},U={class:"item-1"},V=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"用户名")],-1))),A={class:"item-2"},E=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"密码")],-1))),M={key:1,class:"register-con"},q={class:"w-full form-control"},F={class:"item-1"},I=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"用户名 (必填)")],-1))),$={class:"item-2"},G=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"密码 (必填)")],-1))),H={class:"item-3"},T=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"昵称")],-1))),W={class:"item-4"},z=y((()=>i("label",{class:"label"},[i("span",{class:"label-text"},"邮箱")],-1))),B=w(t({__name:"index",setup(t){const{AuthApi:g}=l(),f=a(),w=s(),y=n("login"),B=n("admin"),D=n("123456"),J=n("admin@qq.com"),K=n("超级管理员"),L=e=>{y.value=e},N=async()=>{const e=await g.register({username:B.value,password:D.value,email:J.value,nickname:K.value}),{code:l,data:s,msg:a}=e;return 200===l&&s?(y.value="login",v.ElMessage({type:"success",message:`注册成功!欢迎您,${s.register.username}`,showClose:!0})):v.ElMessage({type:"warning",message:a,showClose:!0})},O=async()=>{const e=await g.login({username:B.value,password:D.value}),{code:l,data:s,msg:a}=e;return w.setUserInfo(null==s?void 0:s.user),w.setToken(null==s?void 0:s.access_token,null==s?void 0:s.refresh_token),200===l&&s?(f.push({path:"/pc/home"}),v.ElMessage({type:"success",message:"登录成功!欢迎您",showClose:!0})):v.ElMessage({type:"warning",message:a,showClose:!0})};return(l,s)=>{const a=e;return o(),c("div",h,[i("div",k,[i("div",_,[i("div",x,["login"===u(y)?(o(),c("div",j,[i("div",C,[i("div",U,[V,d(i("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r(B)?B.value=e:null),type:"text",placeholder:"请输入用户名",class:"w-full input input-bordered"},null,512),[[p,u(B)]])]),i("div",A,[E,d(i("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>r(D)?D.value=e:null),type:"text",placeholder:"请输入密码",class:"w-full input input-bordered"},null,512),[[p,u(D)]])])]),i("div",{class:"item-5"},[i("button",{class:"btn btn-accent btn-block",onClick:O},"登录")]),i("a",{class:"link link-accent",onClick:s[2]||(s[2]=e=>L("register"))}," 没有账号,去注册 ")])):m("",!0),"register"===u(y)?(o(),c("div",M,[i("div",q,[i("div",F,[I,d(i("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>r(B)?B.value=e:null),type:"text",placeholder:"请输入用户名",class:"w-full input input-bordered"},null,512),[[p,u(B)]])]),i("div",$,[G,d(i("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>r(D)?D.value=e:null),type:"password",placeholder:"请输入密码",class:"w-full input input-bordered"},null,512),[[p,u(D)]])]),i("div",H,[T,d(i("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>r(K)?K.value=e:null),type:"text",placeholder:"请输入昵称,非必填",class:"w-full input input-bordered"},null,512),[[p,u(K)]])]),i("div",W,[z,d(i("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>r(J)?J.value=e:null),type:"text",placeholder:"请输入邮箱,非必填",class:"w-full input input-bordered"},null,512),[[p,u(J)]])])]),i("div",{class:"item-5"},[i("button",{class:"btn btn-accent btn-block",onClick:N},"注册")]),i("a",{class:"link link-accent",onClick:s[7]||(s[7]=e=>L("login"))}," 已有账号,去登录 ")])):m("",!0)])])]),b(a)])}}}),[["__scopeId","data-v-fc2ebb8d"]]);export{B as default};
