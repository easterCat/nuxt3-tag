import{_ as e,a as l,b as t}from"./AppHeader.41b86523.js";import{_ as a}from"./FixMenu.vue_vue_type_style_index_0_scoped_8a5ecf18_lang.9c1025d6.js";import n from"./AppBanner.700ba76e.js";import o from"./AreaTitle.aabfd2d0.js";import s from"./TemplateDetail.90bd7f26.js";import{u as i,a as u}from"./shop.8f25176c.js";import{u as c}from"./index.4fe012d4.js";import{I as r}from"./pinia.7ac5f2a7.js";import{_ as m}from"./document-copy.9ed563a4.js";import{_ as d}from"./shopping-trolley.5f2a9482.js";import{e as p,r as v,a as b,f as _,b as g,F as f,G as h,H as y,I as k,W as j,u as x,_ as C,Y as N,Z as w,a9 as E,a4 as I,L as A,X as S,U as z,$ as U}from"./element-plus.3e7898c2.js";import{l as T}from"./lodash.93025024.js";import{_ as V}from"./entry.fcefc495.js";import"./plus.bb77e419.js";import"./vuedraggable.5801950c.js";import"./dayjs.3bf4ac2a.js";import"./sortablejs.c8011fea.js";import"./uuid.d56aad75.js";/* empty css                                                                  *//* empty css                                                                  */import"./Icon.f96b4a01.js";import"./store.e5acb8cd.js";import"./sYw7uX71Xe.38399cea.js";const H={class:"chitu-tags-page page"},X={class:"content"},F={class:"type-list"},L={key:0,class:"tag-list"},Y=["data-index"],$={key:0,class:"image-con"},q={class:"text-con"},B={key:0,class:"en"},D={key:1,class:"en"},G={class:"button-con"},J=["onClick"],M=["onClick"],O={key:1,class:"tag-list"},R=["data-index"],W={key:0,class:"image-con"},Z={class:"text-con"},K={key:0,class:"en"},P={key:1,class:"en"},Q={class:"button-con"},ee=["onClick"],le=["onClick"],te={key:2,class:"tag-list"},ae=["data-index"],ne={key:0,class:"image-con"},oe={class:"text-con"},se={key:0,class:"en"},ie={key:1,class:"en"},ue={class:"button-con"},ce=["onClick"],re=["onClick"],me=V(p({__name:"chitu",setup(p){const{copy:V}=i(),{addShop:me}=u(),{TemplateApi:de}=c(),pe=async e=>{const l=(await r(e,"$XHYNvCeXRl")).data;return JSON.parse(l._rawValue)},ve=v([{name:"参考图",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_cankaotu.json")},{name:"人物",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huageren.json")},{name:"物体",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huagewuti.json")},{name:"构图",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_goutu.json")},{name:"画风",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huafeng.json")},{name:"正面词组",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_zhengmiantag.json")},{name:"负面词组",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_fumiantag.json")}]),be=b([]),_e=b(0),ge=b(!0),fe=b(""),he=b({}),ye=b(!1),ke=b(1),je=b(50),xe=b();let Ce=[],Ne=0;const we=async()=>{const e=await de.getTemplatesChitu({pageIndex:ke.value,pageSize:je.value});be.value=[...be.value,...(null==e?void 0:e.templates)?e.templates:[]]},Ee=e=>{_e.value?(he.value={author:e.author,n_prompt:e.n_prompt,preview:e.preview,model:e.model,prompt:e.prompt,prompt_zh:e.prompt_zh,name:e.name,desc:e.desc},ye.value=!0):(he.value={name:e.name,author:e.author,preview:e.imgbb_url?e.imgbb_url:e.preview,prompt:e.prompt,prompt_zh:e.prompt_zh,n_prompt:e.n_prompt,model:e.model,desc:e.desc,like:e.like},ye.value=!0)},Ie=e=>{fe.value=e},Ae=()=>{be.value=be.value.concat(Ce.slice(50*Ne,50*(Ne+1)))},Se=T.throttle((()=>{const e=xe.value.scrollTop;xe.value.scrollHeight-(e+(document.documentElement.clientHeight||document.body.clientHeight))<=100&&(console.log("触底"),_e.value?(Ne++,Ae()):(ke.value++,we()))}),1500);return _((async()=>{we(),xe.value=document.querySelector(".chitu-tags-page"),xe.value.addEventListener("scroll",Se)})),g((()=>{xe.value.removeEventListener("scroll",Se)})),(i,u)=>{const c=e,r=a,p=n,v=o,b=l,_=U.ElSwitch,g=t,T=U.ElTooltip,de=d,pe=m,fe=s,je=E("animate-css");return f(),h("div",H,[y(r,null,{default:k((()=>[y(c)])),_:1}),j("div",X,[y(p,{placeholder:"搜索标签",onSearchChange:Ie}),y(v,{title:"标签类别"}),j("div",F,[y(r,null,{default:k((()=>[(f(!0),h(N,null,w(x(ve),((e,l)=>I((f(),A(b,{key:l,index:l+"","button-style":1,"button-size":"larger",class:S([l===_e.value?"btn-accent":"btn-primary-30"]),"button-text":null==e?void 0:e.name,onSubmit:e=>(async e=>{Ne=0,ke.value=1,(_e.value||0===_e.value)&&e?(_e.value=e,be.value=[],Ce=await ve[e].file,Ae()):(_e.value=0,be.value=[],we())})(l)},null,8,["index","class","button-text","onSubmit"])),[[je,{direction:"modifySlideInUp",delay:40*l}]]))),128))])),_:1})]),y(v,{title:"标签列表"},{titleSide:k((()=>[y(_,{modelValue:ge.value,"onUpdate:modelValue":u[0]||(u[0]=e=>ge.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏Image","active-text":"开启Image",class:"title-side"},null,8,["modelValue"])])),_:1}),x(Ne)?(f(),h("div",L,[y(r,null,{default:k((()=>[(f(!0),h(N,null,w(be.value,((e,l)=>{var t;return I((f(),h("div",{key:l,class:"tag-item-img ll-media bg-base-100","data-index":l},[ge.value&&5!==_e.value&&6!==_e.value?(f(),h("div",$,[(null==e?void 0:e.min_imgbb_url)?(f(),A(g,{key:0,src:null!=(t=null==e?void 0:e.min_imgbb_url)?t:"",placeholder:[100,50,10],loading:"lazy",onClick:l=>Ee(e)},null,8,["src","onClick"])):C("",!0)])):C("",!0),j("div",q,[y(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(f(),h("p",B,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),h("p",D,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),j("div",G,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>x(me)(null==e?void 0:e.promptEN)},[y(de)],8,J),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>x(V)(null==e?void 0:e.promptEN)},[y(pe)],8,M)])],8,Y)),[[je,{direction:"modifySlideInUp",delay:40*l}]])})),128))])),_:1})])):C("",!0),_e.value?(f(),h("div",O,[y(r,null,{default:k((()=>[(f(!0),h(N,null,w(be.value,((e,l)=>I((f(),h("div",{key:l,class:"tag-item-img ll-media bg-base-100","data-index":l},[ge.value&&5!==_e.value&&6!==_e.value?(f(),h("div",W,[(null==e?void 0:e.fileUrl)?(f(),A(g,{key:0,src:null==e?void 0:e.fileUrl,placeholder:[100,50,10],loading:"lazy",onClick:l=>Ee(e)},null,8,["src","onClick"])):C("",!0)])):C("",!0),j("div",Z,[y(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(f(),h("p",K,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),h("p",P,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),j("div",Q,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>x(me)(null==e?void 0:e.promptEN)},[y(de)],8,ee),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>x(V)(null==e?void 0:e.promptEN)},[y(pe)],8,le)])],8,R)),[[je,{direction:"modifySlideInUp",delay:40*l}]]))),128))])),_:1})])):(f(),h("div",te,[(f(!0),h(N,null,w(be.value,((e,l)=>{var t;return f(),h("div",{key:l,class:"tag-item-img ll-media bg-base-100","data-index":l},[ge.value&&5!==_e.value&&6!==_e.value?(f(),h("div",ne,[(null==e?void 0:e.min_imgbb_url)?(f(),A(g,{key:0,src:null!=(t=null==e?void 0:e.min_imgbb_url)?t:"",placeholder:[100,50,10],loading:"lazy",onClick:l=>Ee(e)},null,8,["src","onClick"])):C("",!0)])):C("",!0),j("div",oe,[y(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.prompt,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(f(),h("p",se,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),h("p",ie,z((null==e?void 0:e.prompt.length)>24?(null==e?void 0:e.prompt.slice(0,24))+"...":null==e?void 0:e.prompt),1))])),_:2},1032,["content"])]),j("div",ue,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>x(me)(null==e?void 0:e.prompt)},[y(de)],8,ce),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>x(V)(null==e?void 0:e.prompt)},[y(pe)],8,re)])],8,ae)})),128))]))]),y(fe,{modelValue:ye.value,"onUpdate:modelValue":u[1]||(u[1]=e=>ye.value=e),"current-template":he.value},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-7973ae23"]]);export{me as default};
